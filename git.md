# Git
**git主要完成两件事情：**
- 多人协作
- 版本控制

## 多人协作开发

### 原理
在远程有个代码仓库，当我们进行业务的时候，需要对远程仓库代码进行修改，不可能等待一个人更改完，另一个才去更改（类似单线程），想要高效开发，就需要多人协作开发（多线程）。每个人都可以通过git clone 从远程仓库中下载代码到本地，开发人员在自己的本地进行更改代码，修改后进行提交，实现多人协作开发

### 方法
通过分支、提交规范、Code Review、合并分支和解决冲突等方法，可以更好地协作开发项目。

**使用分支**：在 Git 中，每个分支都是相互独立的代码库，可以让团队成员在不干扰其他人的情况下开发自己的功能。通常推荐使用主分支（如 master 或 main）作为稳定的版本，而其他分支则用于不同的开发任务或功能。

**提交规范**：为了更好地协作，团队成员需要遵循一致的提交规范，例如使用语义化版本号来标识版本变化，使用有意义的提交信息来描述代码变更内容。

**Code Review**：团队成员应该互相审查代码，以确保代码质量和一致性。Git 提供了 Pull Request 功能，可以让团队成员在一个地方进行讨论和审查代码变更。

**合并分支**：在开发完成后，需要将分支合并到主分支中。团队成员应该确保合并前代码能够通过测试，并与其他的代码库保持一致。
解决冲突：在多人协作的过程中，可能会发生代码冲突。当出现冲突时，团队成员需要协商解决，通常可以使用 Git 提供的合并工具来解决冲突。

## 常用命令
**整个流程的命令**：
- 初始化仓库：git init
- 从远程仓库中拉去代码： git clone
- 在每次修改前对本地代码进行一个更新： git pull --rebase
- 将修改的代码进行本地保存：git stash 
- 将代码进行追踪：git add < 文件名 >
- 将追踪的代码进行提交：git commit -m "< message >"
- 推送到远程仓库中：git push < 远程仓库> < 具体分支>

## git pull --rebase、git pull 、git fetch的区别
- git pull --rebase：拉取远程代码库的最新变更，并通过 rebase 的方式将本地提交应用到远程更新的基础之上。这个命令可以避免在分支合并时产生不必要的合并提交，保持提交历史的清晰和简洁。

- git pull：拉取远程代码库的最新变更，并将本地提交与远程代码库的提交进行合并。这个命令可能会产生不必要的合并提交，不太适合在团队协作中使用。

- git fetch：拉取远程代码库的最新变更，但不会自动合并这些变更到本地分支。它会将远程分支的代码更新到本地的远程分支，但是不会改变当前的工作目录和分支。这个命令可以让你在本地查看远程代码库的更新情况，但不会立即影响到本地代码库。

## gerrit和gitlab的区别
**开发风格**
- gitlab的特点是一个人维系一个分支。
- gerrit的特点是一个团队维系一个分支。（这里的分支对应一个业务需求）

**权限管理**
- gitlab提供了比较多的选择，可以根据需要创建project，每个团队可以根据自己的需求管理自己的代码，方式更加的灵活。
- gerrit比较单一，而且权限配置比较复杂，往往都是要联系管理员做出修改，每个团队很难做到对代码的个性化管理。

**代码评审**
- gitlab是以merge request作为一次review，merge request中可能包含多个 commit，如果review不通过也不需要发起另一次merge request。
- gerrit是以commit作为一次review，由于changeId的存在，可以对一次commit反复的进行review。如果task划分的粒度够细的话，并不会影响各个团队的review习惯。

**团队协作**
- gitlab可以选择公开代码，团队间可以看到互相的代码，有利于团队的协作。
- gerrit由于权限控制问题，只能在权限范围内公开代码。

**信息共享**
- gitlab 可以提供issues，wiki等功能方便开发者与使用者之间的沟通，并且gitlab可以无缝的与一些项目管理工具集成，比如:jira。gitlab每个项目都有自己的wiki，很方便查看。
- gerrit 这个方面比较欠缺。


